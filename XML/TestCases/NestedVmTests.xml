<TestCases>
  <test>
    <TestName>NESTED-KVM-BASIC-VERIFICATION</TestName>
    <testScript>nested_kvm_basic_test.sh</testScript>
    <files>.\Testscripts\Linux\utils.sh,.\Testscripts\Linux\nested_vm_utils.sh,.\Testscripts\Linux\nested_kvm_basic_test.sh</files>
    <TestParameters>
      <!--The nested image should be qcow2 format, and accessible from a public URL-->
      <param>NestedImageUrl=NESTED_IMAGE_URL</param>
      <param>NestedUser=NESTED_VM_USER</param>
      <param>NestedUserPassword=NESTED_VM_PASSWORD</param>
      <param>HostFwdPort=60022</param>
    </TestParameters>
    <Timeout>1200</Timeout>
    <Platform>Azure</Platform>
    <Category>Functional</Category>
    <Area>NESTED</Area>
    <Tags>nested,nested-kvm</Tags>
    <Priority>0</Priority>
    <SetupConfig>
      <SetupType>OneVM</SetupType>
      <OverrideVMSize>Standard_E4s_v3</OverrideVMSize>
    </SetupConfig>
  </test>
  <test>
    <TestName>NESTED-KVM-NTTTCP-PRIVATE-BRIDGE</TestName>
    <testScript>NESTED-KVM-NTTTCP-PRIVATE-BRIDGE.ps1</testScript>
    <files>.\Testscripts\Linux\utils.sh,.\Testscripts\Linux\nested_vm_utils.sh,.\Testscripts\Linux\nested_kvm_ntttcp_private_bridge.sh,.\Testscripts\Linux\enable_root.sh,.\Testscripts\Linux\enable_passwordless_root.sh,.\Testscripts\Linux\perf_ntttcp.sh</files>
    <TestParameters>
      <!--The nested image should be qcow2 format, and accessible from a public URL-->
      <param>NestedImageUrl=NESTED_IMAGE_URL</param>
      <param>NestedUser=NESTED_VM_USER</param>
      <param>NestedUserPassword='NESTED_VM_PASSWORD'</param>
      <param>NestedCpuNum=8</param>
      <param>NestedMemMB=8192</param>
      <param>NestedNetDevice=virtio-net-pci</param>
      <param>testDuration=60</param>
      <param>testType=tcp</param>
      <param>testConnections=NESTED_NTTTCP_TCP_CONNECTIONS</param>
      <param>ntttcpVersion=NTTTCP_VERSION</param>
      <param>lagscopeVersion=LAGSCOPE_VERSION</param>
    </TestParameters>
    <Platform>Azure</Platform>
    <Category>Performance</Category>
    <Area>NESTED</Area>
    <Tags>nested,nested-kvm</Tags>
    <Priority>2</Priority>
    <SetupConfig>
      <SetupType>OneVM</SetupType>
      <OverrideVMSize>Standard_E16s_v3</OverrideVMSize>
    </SetupConfig>
  </test>
  <test>
    <TestName>HYPERV-NESTED-KVM-STORAGE-SINGLE-DISK</TestName>
    <testScript>NESTED-KVM-STORAGE-PERF.ps1</testScript>
    <files>.\Testscripts\Linux\utils.sh,.\Testscripts\Linux\nested_vm_utils.sh,.\Testscripts\Linux\nested_kvm_storage_perf.sh,.\Testscripts\Linux\nested_kvm_perf_fio.sh,.\Testscripts\Linux\enable_root.sh,.\Testscripts\Linux\enable_passwordless_root.sh,.\Testscripts\Linux\fio_jason_parser.sh,.\Testscripts\Linux\JSON.awk,.\Tools\gawk</files>
    <TestParameters>
      <!--The nested image should be qcow2 format, and accessible from a public URL-->
      <param>NestedImageUrl=NESTED_IMAGE_URL</param>
      <param>NestedUser=NESTED_VM_USER</param>
      <param>NestedUserPassword='NESTED_VM_PASSWORD'</param>
      <param>NestedCpuNum=8</param>
      <param>NestedMemMB=8192</param>
      <param>HostFwdPort=60022</param>
      <param>RaidOption='No RAID'</param>
      <param>modes=NESTED-PERF-STORAGE-IO-MODES</param>
      <param>startThread=1</param>
      <param>maxThread=1024</param>
      <param>startIO=4</param>
      <param>numjobs=1</param>
      <param>ioruntime=300</param>
      <param>maxIO=4</param>
      <param>fileSize=8G</param>
    </TestParameters>
    <Platform>HyperV</Platform>
    <Category>Performance</Category>
    <Area>NESTED</Area>
    <Tags>nested,nested-kvm</Tags>
    <Priority>2</Priority>
    <SetupConfig>
      <SetupType>OneVM1Disk</SetupType>
      <OverrideVMSize>Standard_F16</OverrideVMSize>
      <SetupScript>.\Testscripts\Windows\SETUP-Enable-NestedVirtualization.ps1</SetupScript>
    </SetupConfig>
  </test>
  <test>
    <TestName>AZURE-NESTED-KVM-STORAGE-SINGLE-DISK</TestName>
    <testScript>NESTED-KVM-STORAGE-PERF.ps1</testScript>
    <files>.\Testscripts\Linux\utils.sh,.\Testscripts\Linux\nested_vm_utils.sh,.\Testscripts\Linux\nested_kvm_storage_perf.sh,.\Testscripts\Linux\nested_kvm_perf_fio.sh,.\Testscripts\Linux\enable_root.sh,.\Testscripts\Linux\enable_passwordless_root.sh,.\Testscripts\Linux\fio_jason_parser.sh,.\Testscripts\Linux\JSON.awk,.\Tools\gawk</files>
    <TestParameters>
      <!--The nested image should be qcow2 format, and accessible from a public URL-->
      <param>NestedImageUrl=NESTED_IMAGE_URL</param>
      <param>NestedUser=NESTED_VM_USER</param>
      <param>NestedUserPassword='NESTED_VM_PASSWORD'</param>
      <param>NestedCpuNum=8</param>
      <param>NestedMemMB=8192</param>
      <param>HostFwdPort=60022</param>
      <param>RaidOption='No RAID'</param>
      <param>modes=NESTED-PERF-STORAGE-IO-MODES</param>
      <param>startThread=1</param>
      <param>maxThread=1024</param>
      <param>startIO=4</param>
      <param>numjobs=1</param>
      <param>ioruntime=300</param>
      <param>maxIO=4</param>
      <param>fileSize=8G</param>
    </TestParameters>
    <Platform>Azure</Platform>
    <Category>Performance</Category>
    <Area>NESTED</Area>
    <Tags>nested,nested-kvm</Tags>
    <Priority>2</Priority>
    <SetupConfig>
      <SetupType>OneVM1DiskNested</SetupType>
    </SetupConfig>
  </test>
  <test>
    <TestName>HYPERV-NESTED-KVM-STORAGE-MULTIDISK</TestName>
    <testScript>NESTED-KVM-STORAGE-PERF.ps1</testScript>
    <files>.\Testscripts\Linux\utils.sh,.\Testscripts\Linux\nested_vm_utils.sh,.\Testscripts\Linux\nested_kvm_storage_perf.sh,.\Testscripts\Linux\nested_kvm_perf_fio.sh,.\Testscripts\Linux\enable_root.sh,.\Testscripts\Linux\enable_passwordless_root.sh,.\Testscripts\Linux\fio_jason_parser.sh,.\Testscripts\Linux\JSON.awk,.\Tools\gawk</files>
    <TestParameters>
      <!--The nested image should be qcow2 format, and accessible from a public URL-->
      <param>NestedImageUrl=NESTED_IMAGE_URL</param>
      <param>NestedUser=NESTED_VM_USER</param>
      <param>NestedUserPassword='NESTED_VM_PASSWORD'</param>
      <param>NestedCpuNum=8</param>
      <param>NestedMemMB=8192</param>
      <param>HostFwdPort=60022</param>
      <!--The raid option allowed values: 'No RAID','RAID in L1','RAID in L2'-->
      <param>RaidOption=NESTED_RAID_OPTION</param>
      <param>modes=NESTED-PERF-STORAGE-IO-MODES</param>
      <param>startThread=1</param>
      <param>maxThread=1024</param>
      <param>startIO=4</param>
      <param>numjobs=1</param>
      <param>ioruntime=300</param>
      <param>maxIO=4</param>
      <param>fileSize=8G</param>
    </TestParameters>
    <Platform>HyperV</Platform>
    <Category>Performance</Category>
    <Area>NESTED</Area>
    <Tags>nested,nested-kvm</Tags>
    <Priority>2</Priority>
    <SetupConfig>
      <SetupType>OneVM4Disk</SetupType>
      <SetupScript>.\Testscripts\Windows\SETUP-Enable-NestedVirtualization.ps1</SetupScript>
    </SetupConfig>
  </test>
  <test>
    <TestName>AZURE-NESTED-KVM-STORAGE-MULTIDISK</TestName>
    <testScript>NESTED-KVM-STORAGE-PERF.ps1</testScript>
    <files>.\Testscripts\Linux\utils.sh,.\Testscripts\Linux\nested_vm_utils.sh,.\Testscripts\Linux\nested_kvm_storage_perf.sh,.\Testscripts\Linux\nested_kvm_perf_fio.sh,.\Testscripts\Linux\enable_root.sh,.\Testscripts\Linux\enable_passwordless_root.sh,.\Testscripts\Linux\fio_jason_parser.sh,.\Testscripts\Linux\JSON.awk,.\Tools\gawk</files>
    <TestParameters>
      <!--The nested image should be qcow2 format, and accessible from a public URL-->
      <param>NestedImageUrl=NESTED_IMAGE_URL</param>
      <param>NestedUser=NESTED_VM_USER</param>
      <param>NestedUserPassword='NESTED_VM_PASSWORD'</param>
      <param>NestedCpuNum=8</param>
      <param>NestedMemMB=8192</param>
      <param>HostFwdPort=60022</param>
      <!--The raid option allowed values: 'No RAID','RAID in L1','RAID in L2'-->
      <param>RaidOption=NESTED_RAID_OPTION</param>
      <param>modes=NESTED-PERF-STORAGE-IO-MODES</param>
      <param>startThread=1</param>
      <param>maxThread=1024</param>
      <param>startIO=4</param>
      <param>numjobs=1</param>
      <param>ioruntime=300</param>
      <param>maxIO=4</param>
      <param>fileSize=8G</param>
    </TestParameters>
    <Platform>Azure</Platform>
    <Category>Performance</Category>
    <Area>NESTED</Area>
    <Tags>nested,nested-kvm</Tags>
    <Priority>2</Priority>
    <SetupConfig>
      <SetupType>OneVM6DiskNested</SetupType>
    </SetupConfig>
  </test>
  <test>
    <TestName>NESTED-KVM-NTTTCP-DIFFERENT-L1-PUBLIC-BRIDGE</TestName>
    <testScript>NESTED-KVM-NTTTCP-DIFFERENT-L1-PUBLIC-BRIDGE.ps1</testScript>
    <files>.\Testscripts\Linux\utils.sh,.\Testscripts\Linux\nested_vm_utils.sh,.\Testscripts\Linux\nested_kvm_ntttcp_different_l1_public_bridge.sh,.\Testscripts\Linux\enable_root.sh,.\Testscripts\Linux\enable_passwordless_root.sh,.\Testscripts\Linux\perf_ntttcp.sh</files>
    <TestParameters>
      <!--The nested image should be qcow2 format, and accessible from a public URL-->
      <param>NestedImageUrl=NESTED_IMAGE_URL</param>
      <param>NestedUser=NESTED_VM_USER</param>
      <param>NestedUserPassword='NESTED_VM_PASSWORD'</param>
      <param>NestedCpuNum=8</param>
      <param>NestedMemMB=8192</param>
      <param>NestedNetDevice=virtio-net-pci</param>
      <param>testType=tcp</param>
      <param>testDuration=60</param>
      <param>testConnections=NESTED_NTTTCP_TCP_CONNECTIONS</param>
      <param>ntttcpVersion=NTTTCP_VERSION</param>
      <param>lagscopeVersion=LAGSCOPE_VERSION</param>
    </TestParameters>
    <Platform>HyperV</Platform>
    <Category>Performance</Category>
    <Area>NESTED</Area>
    <Tags>nested,nested-kvm</Tags>
    <Priority>2</Priority>
    <SetupConfig>
      <SwitchName>NonSRIOV</SwitchName>
      <SetupType>TwoVM2Host</SetupType>
      <OverrideVMSize>Standard_F16</OverrideVMSize>
      <SetupScript>.\Testscripts\Windows\SETUP-Enable-NestedVirtualization.ps1</SetupScript>
    </SetupConfig>
  </test>
  <test>
    <TestName>NESTED-HYPERV-NTTTCP-DIFFERENT-L1-PUBLIC-BRIDGE</TestName>
    <testScript>NESTED-HYPERV-NTTTCP-DIFFERENT-L1-PUBLIC-BRIDGE.ps1</testScript>
    <files>.\Testscripts\Linux\utils.sh,.\Testscripts\Linux\nested_vm_utils.sh,.\Testscripts\Linux\nested_hyperv_ntttcp_different_l1_public_bridge.sh,.\Testscripts\Linux\enable_root.sh,.\Testscripts\Linux\enable_passwordless_root.sh,.\Testscripts\Linux\perf_ntttcp.sh</files>
    <TestParameters>
      <!--The nested image should be vhd format, and accessible from a public URL-->
      <param>NestedImageUrl=NESTED_VHD_URL</param>
      <param>NestedUser=NESTED_VM_USER</param>
      <param>NestedUserPassword='NESTED_VM_PASSWORD'</param>
      <param>NestedCpuNum=8</param>
      <param>NestedMemMB=8192</param>
      <param>testDuration=60</param>
      <param>testType=tcp</param>
      <param>testConnections=NESTED_NTTTCP_TCP_CONNECTIONS</param>
      <param>ntttcpVersion=NTTTCP_VERSION</param>
      <param>lagscopeVersion=LAGSCOPE_VERSION</param>
    </TestParameters>
    <Platform>HyperV</Platform>
    <Category>Performance</Category>
    <Area>NESTED</Area>
    <Tags>nested,nested-hyperv</Tags>
    <Priority>2</Priority>
    <SetupConfig>
      <SwitchName>NonSRIOV</SwitchName>
      <OSType>Windows</OSType>
      <SetupType>TwoVM2Host</SetupType>
      <OverrideVMSize>Standard_F16</OverrideVMSize>
      <SetupScript>.\Testscripts\Windows\SETUP-Enable-NestedVirtualization.ps1</SetupScript>
    </SetupConfig>
  </test>
  <test>
    <TestName>NESTED-KVM-NTTTCP-DIFFERENT-L1-NAT</TestName>
    <testScript>NESTED-KVM-NTTTCP-DIFFERENT-L1-PUBLIC-BRIDGE.ps1</testScript>
    <files>.\Testscripts\Linux\utils.sh,.\Testscripts\Linux\nested_vm_utils.sh,.\Testscripts\Linux\nested_kvm_ntttcp_different_l1_nat.sh,.\Testscripts\Linux\enable_root.sh,.\Testscripts\Linux\enable_passwordless_root.sh,.\Testscripts\Linux\perf_ntttcp.sh,.\Testscripts\Linux\nat_qemu_ifup.sh,</files>
    <TestParameters>
      <!--The nested image should be qcow2 format, and accessible from a public URL-->
      <param>NestedImageUrl=NESTED_IMAGE_URL</param>
      <param>NestedUser=NESTED_VM_USER</param>
      <param>NestedUserPassword='NESTED_VM_PASSWORD'</param>
      <param>NestedCpuNum=8</param>
      <param>NestedMemMB=8192</param>
      <param>NestedNetDevice=virtio-net-pci</param>
      <param>testDuration=60</param>
      <param>testType=tcp</param>
      <param>testConnections=NESTED_NTTTCP_TCP_CONNECTIONS</param>
      <param>ntttcpVersion=NTTTCP_VERSION</param>
      <param>lagscopeVersion=LAGSCOPE_VERSION</param>
    </TestParameters>
    <Platform>HyperV</Platform>
    <Category>Performance</Category>
    <Area>NESTED</Area>
    <Tags>nested,nested-kvm</Tags>
    <Priority>2</Priority>
    <SetupConfig>
      <SwitchName>NonSRIOV</SwitchName>
      <SetupType>TwoVM2Host</SetupType>
      <OverrideVMSize>Standard_F16</OverrideVMSize>
      <SetupScript>.\Testscripts\Windows\SETUP-Enable-NestedVirtualization.ps1</SetupScript>
    </SetupConfig>
  </test>
  <test>
    <TestName>NESTED-KVM-LAGSCOPE-DIFFERENT-L1-PUBLIC-BRIDGE</TestName>
    <testScript>NESTED-KVM-LAGSCOPE-DIFFERENT-L1-PUBLIC-BRIDGE.ps1</testScript>
    <files>.\Testscripts\Linux\utils.sh,.\Testscripts\Linux\nested_vm_utils.sh,.\Testscripts\Linux\nested_kvm_lagscope_different_l1_public_bridge.sh,.\Testscripts\Linux\enable_root.sh,.\Testscripts\Linux\enable_passwordless_root.sh,.\Testscripts\Linux\perf_lagscope.sh</files>
    <TestParameters>
      <!--The nested image should be qcow2 format, and accessible from a public URL-->
      <param>NestedImageUrl=NESTED_IMAGE_URL</param>
      <param>NestedUser=NESTED_VM_USER</param>
      <param>NestedUserPassword='NESTED_VM_PASSWORD'</param>
      <param>NestedCpuNum=8</param>
      <param>NestedMemMB=8192</param>
      <param>NestedNetDevice=virtio-net-pci</param>
      <param>pingIteration=1000000</param>
      <param>lagscopeVersion=LAGSCOPE_VERSION</param>
    </TestParameters>
    <Platform>HyperV</Platform>
    <Category>Performance</Category>
    <Area>NESTED</Area>
    <Tags>nested,nested-kvm</Tags>
    <Priority>2</Priority>
    <SetupConfig>
      <SwitchName>NonSRIOV</SwitchName>
      <SetupType>TwoVM2Host</SetupType>
      <OverrideVMSize>Standard_F16</OverrideVMSize>
      <SetupScript>.\Testscripts\Windows\SETUP-Enable-NestedVirtualization.ps1</SetupScript>
    </SetupConfig>
  </test>
  <test>
    <TestName>AZURE-NESTED-KVM-NTTTCP-DIFFERENT-L1-NAT</TestName>
    <testScript>NESTED-KVM-NTTTCP-DIFFERENT-L1-PUBLIC-BRIDGE.ps1</testScript>
    <files>.\Testscripts\Linux\utils.sh,.\Testscripts\Linux\nested_vm_utils.sh,.\Testscripts\Linux\nested_kvm_ntttcp_different_l1_nat.sh,.\Testscripts\Linux\enable_root.sh,.\Testscripts\Linux\enable_passwordless_root.sh,.\Testscripts\Linux\perf_ntttcp.sh,.\Testscripts\Linux\nat_qemu_ifup.sh,</files>
    <TestParameters>
      <!--The nested image should be qcow2 format, and accessible from a public URL-->
      <param>NestedImageUrl=NESTED_IMAGE_URL</param>
      <param>NestedUser=NESTED_VM_USER</param>
      <param>NestedUserPassword='NESTED_VM_PASSWORD'</param>
      <param>NestedCpuNum=8</param>
      <param>NestedMemMB=8192</param>
      <param>NestedNetDevice=virtio-net-pci</param>
      <param>testDuration=60</param>
      <param>testType=tcp</param>
      <param>testConnections=NESTED_NTTTCP_TCP_CONNECTIONS</param>
      <param>ntttcpVersion=NTTTCP_VERSION</param>
      <param>lagscopeVersion=LAGSCOPE_VERSION</param>
    </TestParameters>
    <Platform>Azure</Platform>
    <Category>Performance</Category>
    <Area>NESTED</Area>
    <Tags>nested,nested-kvm</Tags>
    <Priority>2</Priority>
    <SetupConfig>
      <SetupType>TwoVM2NIC</SetupType>
      <OverrideVMSize>Standard_E16s_v3</OverrideVMSize>
    </SetupConfig>
  </test>
  <test>
    <TestName>HYPERV-WINDOWS-NESTED-HYPERV-STORAGE-SINGLE-DISK</TestName>
    <testScript>NESTED-HYPERV-STORAGE-PERF.ps1</testScript>
    <files>.\Testscripts\Linux\utils.sh,.\Testscripts\Linux\nested_vm_utils.sh,.\Testscripts\Linux\nested_kvm_perf_fio.sh,.\Testscripts\Linux\fio_jason_parser.sh,.\Testscripts\Linux\JSON.awk,.\Tools\gawk</files>
    <TestParameters>
      <!-- The nested image should be vhd format, it's a local path, a SMB path, or a public URL  -->
      <param>NestedImageUrl=NESTED_VHD_PATH</param>
      <param>NestedUser=NESTED_VM_USER</param>
      <param>NestedUserPassword='NESTED_VM_PASSWORD'</param>
      <param>NestedCpuNum=8</param>
      <param>NestedMemMB=8192</param>
      <param>HostFwdPort=60022</param>
      <param>RaidOption='No RAID'</param>
      <param>modes=NESTED-PERF-STORAGE-IO-MODES</param>
      <param>startThread=1</param>
      <param>maxThread=1024</param>
      <param>startIO=4</param>
      <param>numjobs=1</param>
      <param>ioruntime=300</param>
      <param>maxIO=4</param>
      <param>fileSize=8G</param>
      <param>SkipVerifyKernelLogs=true</param>
    </TestParameters>
    <Platform>HyperV</Platform>
    <Category>Performance</Category>
    <Area>STORAGE</Area>
    <Tags>nested,nested-hyperv</Tags>
    <Priority>2</Priority>
    <SetupConfig>
      <OSType>Windows</OSType>
      <SetupType>OneVM1Disk</SetupType>
      <OverrideVMSize>Standard_F16</OverrideVMSize>
      <SetupScript>.\Testscripts\Windows\SETUP-Enable-NestedVirtualization.ps1</SetupScript>
    </SetupConfig>
  </test>
  <test>
    <TestName>HYPERV-WINDOWS-NESTED-HYPERV-STORAGE-MULTIDISK</TestName>
    <testScript>NESTED-HYPERV-STORAGE-PERF.ps1</testScript>
    <files>.\Testscripts\Linux\utils.sh,.\Testscripts\Linux\nested_vm_utils.sh,.\Testscripts\Linux\nested_kvm_perf_fio.sh,.\Testscripts\Linux\fio_jason_parser.sh,.\Testscripts\Linux\JSON.awk,.\Tools\gawk</files>
    <TestParameters>
      <!-- The nested image should be vhd format, it's a local path, a SMB path, or a public URL  -->
      <param>NestedImageUrl=NESTED_VHD_PATH</param>
      <param>NestedUser=NESTED_VM_USER</param>
      <param>NestedUserPassword='NESTED_VM_PASSWORD'</param>
      <param>NestedCpuNum=8</param>
      <param>NestedMemMB=8192</param>
      <param>HostFwdPort=60022</param>
      <!--The raid option allowed values: 'No RAID','RAID in L1','RAID in L2'-->
      <param>RaidOption='RAID in L1'</param>
      <param>modes=NESTED-PERF-STORAGE-IO-MODES</param>
      <param>startThread=1</param>
      <param>maxThread=1024</param>
      <param>startIO=4</param>
      <param>numjobs=1</param>
      <param>ioruntime=300</param>
      <param>maxIO=4</param>
      <param>fileSize=8G</param>
      <param>Interleave=65536</param>
      <param>SkipVerifyKernelLogs=true</param>
    </TestParameters>
    <Platform>HyperV</Platform>
    <Category>Performance</Category>
    <Area>STORAGE</Area>
    <Tags>nested,nested-hyperv</Tags>
    <Priority>2</Priority>
    <SetupConfig>
      <OSType>Windows</OSType>
      <SetupType>OneVM4Disk</SetupType>
      <SetupScript>.\Testscripts\Windows\SETUP-Enable-NestedVirtualization.ps1</SetupScript>
    </SetupConfig>
  </test>
  <test>
    <TestName>AZURE-WINDOWS-NESTED-HYPERV-STORAGE-SINGLE-DISK</TestName>
    <testScript>NESTED-HYPERV-STORAGE-PERF.ps1</testScript>
    <files>.\Testscripts\Linux\utils.sh,.\Testscripts\Linux\nested_vm_utils.sh,.\Testscripts\Linux\nested_kvm_perf_fio.sh,.\Testscripts\Linux\fio_jason_parser.sh,.\Testscripts\Linux\JSON.awk,.\Tools\gawk</files>
    <TestParameters>
      <!--The nested image should be vhd format, and accessible from a public URL-->
      <param>NestedImageUrl=NESTED_VHD_URL</param>
      <param>NestedUser=NESTED_VM_USER</param>
      <param>NestedUserPassword='NESTED_VM_PASSWORD'</param>
      <param>NestedCpuNum=8</param>
      <param>NestedMemMB=8192</param>
      <param>HostFwdPort=60022</param>
      <param>RaidOption='No RAID'</param>
      <param>modes=NESTED-PERF-STORAGE-IO-MODES</param>
      <param>startThread=1</param>
      <param>maxThread=1024</param>
      <param>startIO=4</param>
      <param>numjobs=1</param>
      <param>ioruntime=300</param>
      <param>maxIO=4</param>
      <param>fileSize=8G</param>
      <param>SkipVerifyKernelLogs=true</param>
    </TestParameters>
    <Platform>Azure</Platform>
    <Category>Performance</Category>
    <Area>STORAGE</Area>
    <Tags>nested,nested-hyperv</Tags>
    <Priority>2</Priority>
    <SetupConfig>
      <OSType>Windows</OSType>
      <ARMImageName>MicrosoftWindowsServer windowsserver 2019-Datacenter latest,=~windowsserver</ARMImageName>
      <SetupType>OneVM1DiskNested</SetupType>
    </SetupConfig>
  </test>
  <test>
    <TestName>AZURE-WINDOWS-NESTED-HYPERV-STORAGE-MULTIDISK</TestName>
    <testScript>NESTED-HYPERV-STORAGE-PERF.ps1</testScript>
    <files>.\Testscripts\Linux\utils.sh,.\Testscripts\Linux\nested_vm_utils.sh,.\Testscripts\Linux\nested_kvm_perf_fio.sh,.\Testscripts\Linux\fio_jason_parser.sh,.\Testscripts\Linux\JSON.awk,.\Tools\gawk</files>
    <TestParameters>
      <!--The nested image should be vhd format, and accessible from a public URL-->
      <param>NestedImageUrl=NESTED_VHD_URL</param>
      <param>NestedUser=NESTED_VM_USER</param>
      <param>NestedUserPassword='NESTED_VM_PASSWORD'</param>
      <param>NestedCpuNum=8</param>
      <param>NestedMemMB=8192</param>
      <param>HostFwdPort=60022</param>
      <!--The raid option allowed values: 'No RAID','RAID in L1','RAID in L2'-->
      <param>RaidOption='RAID in L1'</param>
      <param>modes=NESTED-PERF-STORAGE-IO-MODES</param>
      <param>startThread=1</param>
      <param>maxThread=1024</param>
      <param>startIO=4</param>
      <param>numjobs=1</param>
      <param>ioruntime=300</param>
      <param>maxIO=4</param>
      <param>fileSize=8G</param>
      <param>Interleave=65536</param>
      <param>SkipVerifyKernelLogs=true</param>
    </TestParameters>
    <Platform>Azure</Platform>
    <Category>Performance</Category>
    <Area>STORAGE</Area>
    <Tags>nested,nested-hyperv</Tags>
    <Priority>2</Priority>
    <SetupConfig>
      <OSType>Windows</OSType>
      <ARMImageName>MicrosoftWindowsServer windowsserver 2019-Datacenter latest,=~windowsserver</ARMImageName>
      <SetupType>OneVM6DiskNested</SetupType>
    </SetupConfig>
  </test>
  <test>
    <TestName>NESTED-KVM-NETPERF-PPS</TestName>
    <testScript>NESTED-KVM-NETPERF-PPS.ps1</testScript>
    <files>.\Testscripts\Linux\utils.sh,.\Testscripts\Linux\nested_vm_utils.sh,.\Testscripts\Linux\nested_kvm_netperf_pps.sh,.\Testscripts\Linux\enable_root.sh,.\Testscripts\Linux\enable_passwordless_root.sh,.\Testscripts\Linux\perf_netperf.sh</files>
    <TestParameters>
      <!--The nested image should be qcow2 format, and accessible from a public URL-->
      <param>NestedImageUrl=NESTED_IMAGE_URL</param>
      <param>NestedUser=NESTED_VM_USER</param>
      <param>NestedUserPassword='NESTED_VM_PASSWORD'</param>
      <param>NestedCpuNum=8</param>
      <param>NestedMemMB=8192</param>
      <param>NestedNetDevice=virtio-net-pci</param>
      <param>test_duration=NETPERF_RUNTIME_IN_SECONDS</param>
      <param>test_type="singlepps"</param>
      <!--singlepps/maxpps-->
    </TestParameters>
    <Platform>HyperV</Platform>
    <Category>Performance</Category>
    <Area>NESTED</Area>
    <Tags>nested,nested-kvm</Tags>
    <Priority>2</Priority>
    <SetupConfig>
      <SwitchName>NonSRIOV</SwitchName>
      <SetupType>TwoVM2Host</SetupType>
      <OverrideVMSize>Standard_F16</OverrideVMSize>
      <SetupScript>.\Testscripts\Windows\SETUP-Enable-NestedVirtualization.ps1</SetupScript>
    </SetupConfig>
  </test>
  <test>
    <TestName>AZURE-NESTED-KVM-NETPERF-PPS</TestName>
    <testScript>NESTED-KVM-NETPERF-PPS.ps1</testScript>
    <files>.\Testscripts\Linux\utils.sh,.\Testscripts\Linux\nested_vm_utils.sh,.\Testscripts\Linux\nested_kvm_netperf_pps_nat.sh,.\Testscripts\Linux\enable_root.sh,.\Testscripts\Linux\enable_passwordless_root.sh,.\Testscripts\Linux\perf_netperf.sh,.\Testscripts\Linux\nat_qemu_ifup.sh</files>
    <TestParameters>
      <!--The nested image should be qcow2 format, and accessible from a public URL-->
      <param>NestedImageUrl=NESTED_IMAGE_URL</param>
      <param>NestedUser=NESTED_VM_USER</param>
      <param>NestedUserPassword='NESTED_VM_PASSWORD'</param>
      <param>NestedCpuNum=8</param>
      <param>NestedMemMB=8192</param>
      <param>NestedNetDevice=virtio-net-pci</param>
      <param>test_duration=NETPERF_RUNTIME_IN_SECONDS</param>
      <param>test_type="singlepps"</param>
      <!--singlepps/maxpps-->
    </TestParameters>
    <Platform>Azure</Platform>
    <Category>Performance</Category>
    <Area>NESTED</Area>
    <Tags>nested,nested-kvm</Tags>
    <Priority>2</Priority>
    <SetupConfig>
      <SetupType>TwoVM2NIC</SetupType>
      <OverrideVMSize>Standard_E16s_v3</OverrideVMSize>
    </SetupConfig>
  </test>
  <test>
    <TestName>NESTED-HYPERV-NTTTCP-DIFFERENT-L1-NAT</TestName>
    <testScript>NESTED-HYPERV-NTTTCP-DIFFERENT-L1-NAT.ps1</testScript>
    <files>.\Testscripts\Linux\utils.sh,.\Testscripts\Linux\nested_vm_utils.sh,.\Testscripts\Linux\nested_hyperv_ntttcp_different_l1_nat.sh,.\Testscripts\Linux\enable_root.sh,.\Testscripts\Linux\enable_passwordless_root.sh,.\Testscripts\Linux\perf_ntttcp.sh</files>
    <TestParameters>
      <!--The nested image should be vhd format, and accessible from a public URL-->
      <param>NestedImageUrl=NESTED_VHD_URL</param>
      <param>NestedUser=NESTED_VM_USER</param>
      <param>NestedUserPassword='NESTED_VM_PASSWORD'</param>
      <param>NestedCpuNum=8</param>
      <param>NestedMemMB=8192</param>
      <param>NestedNetDevice=virtio-net-pci</param>
      <param>testDuration=60</param>
      <param>testType=tcp</param>
      <param>testConnections=NESTED_NTTTCP_TCP_CONNECTIONS</param>
      <param>SkipVerifyKernelLogs=true</param>
      <param>ntttcpVersion=NTTTCP_VERSION</param>
      <param>lagscopeVersion=LAGSCOPE_VERSION</param>
    </TestParameters>
    <Platform>HyperV</Platform>
    <Category>Performance</Category>
    <Area>NESTED</Area>
    <Tags>nested,nested-hyperv</Tags>
    <Priority>2</Priority>
    <SetupConfig>
      <OSType>Windows</OSType>
      <SetupType>TwoVM2Host</SetupType>
      <OverrideVMSize>Standard_F16</OverrideVMSize>
      <SetupScript>.\Testscripts\Windows\SETUP-Enable-NestedVirtualization.ps1</SetupScript>
    </SetupConfig>
  </test>
  <test>
    <TestName>AZURE-NESTED-HYPERV-NTTTCP-DIFFERENT-L1-NAT</TestName>
    <testScript>NESTED-HYPERV-NTTTCP-DIFFERENT-L1-NAT.ps1</testScript>
    <files>.\Testscripts\Linux\utils.sh,.\Testscripts\Linux\nested_vm_utils.sh,.\Testscripts\Linux\nested_hyperv_ntttcp_different_l1_nat.sh,.\Testscripts\Linux\enable_root.sh,.\Testscripts\Linux\enable_passwordless_root.sh,.\Testscripts\Linux\perf_ntttcp.sh</files>
    <TestParameters>
      <!--The nested image should be vhd format, and accessible from a public URL-->
      <param>NestedImageUrl=NESTED_VHD_URL</param>
      <param>NestedUser=NESTED_VM_USER</param>
      <param>NestedUserPassword='NESTED_VM_PASSWORD'</param>
      <param>NestedCpuNum=8</param>
      <param>NestedMemMB=8192</param>
      <param>NestedNetDevice=virtio-net-pci</param>
      <param>testDuration=60</param>
      <param>testType=tcp</param>
      <param>testConnections=NESTED_NTTTCP_TCP_CONNECTIONS</param>
      <param>SkipVerifyKernelLogs=true</param>
      <param>ntttcpVersion=NTTTCP_VERSION</param>
      <param>lagscopeVersion=LAGSCOPE_VERSION</param>
    </TestParameters>
    <Platform>Azure</Platform>
    <Category>Performance</Category>
    <Area>NESTED</Area>
    <Tags>nested,nested-hyperv</Tags>
    <Priority>2</Priority>
    <SetupConfig>
      <OSType>Windows</OSType>
      <ARMImageName>MicrosoftWindowsServer windowsserver 2019-Datacenter latest,=~windowsserver</ARMImageName>
      <SetupType>TwoVMNested</SetupType>
    </SetupConfig>
  </test>
</TestCases>